# Концепт умного дома
Проект на стадии разработки. Функционал умного дома ещё не реализован.
## Цели проекта
Разработка простого сервера умного дома на языке PHP:
- поддержка оборудования, которое имеется у автора проекта;
- максимально простой и понятный код на PHP;
- возможность запуска сервера на одноплатных ПК.
Идея создания данного проекта родилась после использования проекта [Majordomo](https://github.com/sergejey/majordomo), внутри которого очень много устаревшего и потенциально опасного кода (например, не используются подготовленные выражения при работе с БД).

На данный момент проект не ставит своими целями:
- создание клона [Majordomo](https://github.com/sergejey/majordomo);
- создание удобного для конечного пользователя продукта с простой установкой и настройкой без необходимости вникать в программный код;
- поддержки всех имеющихся версий PHP: минимально PHP 7.0, возможно повышение версии в процессе разработки;
- поддержки конфигураций PHP, которые не имеют в своём составе необходимых для работы модулей (отказ от использования полифилов в серверном коде);
- поддержки работы сервера на семействе ОС Windows.
## Системные требования
- PHP 7.0 или выше;
- поддержка разделяемой памяти (соберите PHP с опцией --enable-sysvshm).

## Уже реализовано
В текущем состоянии проект имеет следующий функционал:
- Тестовая реализация демонов. Созданы демоны для получения данных с оборудования Xiaomi и Yeelight. Вырабатываются требования для создания демонов. В текущих демонах используется черновая версия, когда данные о модуле располагаются в отдельном пространстве имён PHP и в этом пространстве имён созданы необходимые классы с требуемыми методами (требования пока не задокументированы).
- Сервис обработки веб-запросов от демонов с данными и их обработка через модули.
- Сбор данных с датчиков температуры, влажности, давления и других данных в числовом виде.
- Минималистичный черновой интерфейс для демонстрации работоспособности проекта.
- Отобажение списка устройств, которые передают данные модулям.
- Не настраиваемая визуализация в виде графиков температуры и давления (пока отображаются только демоданные).

### Поддержка умного дома Xiaomi
Поддерживается следующее оборудование:
- Xiaomi Gateway - шлюз Xiaomi;
- Xiaomi Temperature And Humidity Sensor - датчик температуры и влажности;
- Aqara Temperature, Humidity And Pressure Sensor датчик температуры, влажности и атмосферного давления;
- Xiaomi Motion Sensor - датчик движения;
- Xiaomi Magnet Sensor - датчик открытия двери/окна.
- 
### Поддержка светильников Yeelight
Работает обнаружение светильников и передача команд. Информация о состоянии в реальном времени пока не обновляется.
Должно поддерживаться большинство существующего оборудования, которое работает по протоколу Yeelight для локальной сети.