# История изменений

## v0.3.2, 25.08.2019

Изменено местоположение файлов журналов и pid-файлов для демонов. Для нормальной работы демонов необходимо создать папки /var/log/phpmd и /var/run/phpmd с возможностью записи для пользователя, который указан в файле phpmd.service. Расположение папок можно изменить указав соответствующие значения в параметрах log_dir и pid_dir в файле settings.json.

Папки daemon/log и daemon/pid могут быть удалены.

## v0.3.1, 22.08.2019

### Изменение базы данных

Комментарии к таблицам вынесены из комментариев SQL в комментарии к таблицам. Удалена устаревшая таблица auth_codes. Для приведения базы данных к текущему виду выполните следующие запросы:
```sql
DROP TABLE auth_codes;
COMMENT ON TABLE auth_users IS 'Пользователи системы';
COMMENT ON TABLE auth_server IS 'Клиенты сервера OAuth 2.0';
COMMENT ON TABLE auth_tokens IS 'Токены OAuth 2.0';
COMMENT ON TABLE auth_sessions IS 'Сессии пользователей системы';
COMMENT ON TABLE auth_fail2ban IS 'Данные об ошибках аутентификации';
COMMENT ON TABLE places IS 'Места размещения устройств';
COMMENT ON TABLE modules IS 'Модули';
COMMENT ON TABLE devices IS 'Устройства';
COMMENT ON TABLE meter_units IS 'Типы измеряемых параметров';
COMMENT ON TABLE meters IS 'Измерительные датчики';
COMMENT ON TABLE meter_history IS 'Журнал измерений';
COMMENT ON TABLE indicators IS 'Контрольные датчики';
COMMENT ON TABLE indicator_history IS 'Журнал контрольных датчиков';
COMMENT ON TABLE variables IS 'Пользовательские и системные переменные';
COMMENT ON TABLE tts_log IS 'Журнал голосовых сообщений';
```

## v0.3.0, 19.08.2019

### Изменение базы данных

Добавлена таблица tts_log - лог голосовых сообщений. Для приведения БД к требуемому виду выполните запрос:
```sql
CREATE TABLE tts_log (
    id bigint PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    timestamp timestamptz DEFAULT CURRENT_TIMESTAMP,
    text text
);
CREATE INDEX tts_log_timestamp_idx ON tts_log (timestamp);
```

## v0.2.0

До данной версии история изменений не оформлялась.